!function(e,t){"use strict";angular.module("jb-zconnect-widget-company",["adf.provider","nvd3","ngDropzone","slick","ngSanitize","angular-timeline","angularMoment","ngAnimate","ngFileUpload","ngResource","angular-underscore","ngZconnected"]).config(["dashboardProvider",function(e){Dropzone.autoDiscover=!1;var t="{widgetsPath}/jb-zconnect-widget-company/src/templates/",n={height:225,_DEBUG:!1},o={collapse:!1,frameless:!1,styleClass:"",reload:!0,resolve:{currentUser:["userService",function(e){return e.getCurrentUser()}]}};e.widget("general-stats",angular.extend(o,{title:"Company General Stats",description:"Widget for showing general information for company.",templateUrl:t+"general-stats.html",controller:"GeneralStatsCtrl",controllerAs:"generalStats",styleClass:"general-stats",config:angular.extend(n,{})})).widget("top-jobs",angular.extend(o,{title:"Company Top Jobs",description:"Widget for showing most applied jobs from company.",templateUrl:t+"top-jobs.html",controller:"TopJobsCtrl",controllerAs:"topJobs",styleClass:"top-jobs",config:angular.extend(n,{})})).widget("drop-cv",angular.extend(o,{title:"Company CV Dropzone",description:"Widget that provides a dropzone area for uploading applicants cv.",templateUrl:t+"drop-cv.html",controller:"DropCvCtrl",controllerAs:"dropCv",styleClass:"drop-cv",reload:!1,config:angular.extend(n,{})})).widget("ads",angular.extend(o,{title:"Advertisements",description:"Widget that shows advertisements.",templateUrl:t+"ads.html",controller:"AdsCtrl",controllerAs:"ads",styleClass:"ads",config:angular.extend(n,{})})).widget("timeline",angular.extend(o,{title:"Timeline",description:"Widget that shows company timeline/activities.",templateUrl:t+"timeline.html",controller:"TimelineCtrl",controllerAs:"timeline",styleClass:"timeline",config:angular.extend(n,{})})).widget("job-post-form",angular.extend(o,{title:"Job Post",description:"Widget that shows a form for job posting.",templateUrl:t+"job-post.html",controller:"JobPostCtrl",controllerAs:"jobPost",styleClass:"job-post-form",config:angular.extend(n,{})})).widget("applicant-stats",angular.extend(o,{title:"Applicant Stats",description:"Widget that shows visual statistics for total applicants of company.",templateUrl:t+"applicant-stats.html",controller:"ApplicantStatsCtrl",controllerAs:"applicantStats",styleClass:"applicant-stats",config:angular.extend(n,{})}))}]).provider("jbWidget",function(){var e=this,t="//jobsglobal.dev/api/v1",n={},o={},a="jobsglobal.dev";return e.setSiteName=function(t){return a=t,e},e.setUser=function(t){return n=t,e},e.setCompany=function(t){return o=t,e},e.setApiRoot=function(n){return t=n,e},e.$get=function(){return{apiRoot:t,user:n,company:o,siteName:a}},e}),angular.module("jb-zconnect-widget-company").run(["$templateCache",function(e){e.put("{widgetsPath}/jb-zconnect-widget-company/src/edit.html",'<form role=form><div class=form-group><label for=sample>Sample</label> <input type=text class=form-control id=sample ng-model=config.sample placeholder="Enter sample"></div></form>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/view.html","<div><h1>Widget view</h1><p>Content of {{config.sample}}</p></div>"),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/ads.html",'<div style="height: {{ads.config.height}}px !important"><slick slides-to-show=1 data=ads.list slides-to-scroll=1 autoplay=false autoplayspeed=2 arrows=true centermode=true dots=true init-onload=true><div data-ng-repeat="ad in ads.list" class="text-center container"><a data-ng-href={{ad.link}}><img class=img-responsive data-ng-src={{ad.image}} alt={{ad.title}}> <span class=ad-message>{{ad.message}}</span></a></div></slick></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/applicant-stats.html",'<div style="height: {{applicantStats.config.height}}px !important;overflow: auto"><nvd3 options=applicantStats.options data=applicantStats.data></nvd3></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/drop-cv.html","<div><form class=dropzone method=post enctype=multipart/form-data ng-dropzone dropzone=dropCv.dropzone dropzone-config=dropCv.dropzoneConfig event-handlers=\"{ 'addedfile': dropCv.dzAddedFile, 'error': dropCv.dzError }\" style=\"min-height: {{dropCv.config.height}}px\"><div class=dz-message>Drop CV here or click to upload</div></form></div>"),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/general-stats.html",'<div style="height: {{generalStats.config.height}}px !important;overflow: auto"><nvd3 options=generalStats.options data=generalStats.data></nvd3></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/job-post.html",'<div style="height: {{jobPost.config.height}}px !important;float: left;overflow: auto;width:100%"><div data-ng-bind-html="jobPost.moduleHtml | html"></div></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/joomla-module-edit.html",'<form role=form name=joomlaModuleEditForm><div class=form-group><label for=module>Joomla Module</label><select name=module data-ng-model=config.module data-ng-options="module as module for module in joomlaModuleEdit.modules"><option disabled selected data-ng-required=true>Select Module</option></select></div></form>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/joomla-module.html",'<div><div class="alert alert-info" ng-if=!config.module>Please select a module in the widget configuration</div><div class=joomla-module data-ng-bind-html=joomlaModule.renderedHtml data-ng-if=config.module></div></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/timeline.html","<div style=\"height: {{timeline.config.height}}px !important\"><timeline><timeline-event ng-repeat=\"event in timeline.events\"><timeline-badge class=actor-avatar><img class=img-responsive data-ng-src={{event.actor.avatar}} alt={{event.actor.first_name}}></timeline-badge><timeline-panel class={{event.badgeClass}}><timeline-heading data-ng-switch data-on=event.app><span class=pull-right am-time-ago=\"event.created | amUtc\"></span> <span class=title-header data-ng-switch-when=groups.wall>{{(event.actor.user_id==timeline.currentUser.user_id) ? \"You\" : event.actor.first_name}} posted a status.<h4 data-ng-bind-html=event.title></h4></span> <span class=title-header data-ng-switch-when=groups.jobpost>{{event.actor.first_name}} posted a job.<h4 data-ng-bind-html=event.title></h4></span> <span class=title-header data-ng-switch-when=groups.join><ng-pluralize count=event.actors.length when=\"{ '0': '', '1': '{{event.actors[0].first_name}} has joined the company.', '2': '{{event.actors[0].first_name}} and {{event.actors[1].first_name}} have joined the company.', 'one': '{{event.actors[0].first_name}} and {{event.actors[1].first_name}} and one other have joined the company.', 'other': '{{event.actors[0].first_name}} and {{event.actors[1].first_name}} and {} other have joined the company.' }\" offset=2></ng-pluralize></span> <span class=title-header data-ng-switch-when=videos>{{event.actor.first_name}} posted a video.<br><h5><a data-ng-href={{event.params.video_url}}>Link</a> to video.</h5></span> <span class=title-header data-ng-switch-when=photos>{{event.actor.first_name}} posted a photo.<br><h5><a data-ng-href={{event.params.photo_url}}>Link</a> to photo.</h5></span> <span class=title-header data-ng-switch-when=events>{{event.actor.first_name}} posted an event.<br><h5><a data-ng-href={{event.params.event_url}}>Link</a> to event.</h5></span></timeline-heading><p data-ng-bind-html=event.content></p></timeline-panel></timeline-event></timeline></div>"),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/top-jobs.html",'<div style="height: {{topJobs.config.height}}px !important;overflow: auto"><table class="table table-striped table-responsive"><tr><th>Position</th><th class=text-center>Applicants</th></tr><tr data-ng-repeat="job in topJobs.data"><td data-ng-bind=job.job_title></td><td class=text-center data-ng-bind=job.total></td></tr></table></div>')}]),angular.module("jb-zconnect-widget-company").controller("TopJobsCtrl",["config","jobService","jbWidget","ngZconnected","currentUser",function(e,t,n,o,a){var i=this;i.data=[],i.config=e,t.getMostApplied(a.user_id,n.company.id,n.limit).then(function(e){o._DEBUG&&console.log(e),i.data=e.data},function(e){o._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("TimelineCtrl",["config","companyService","jbWidget","ngZconnected",function(e,t,n,o){var a=this;a.config=e,a.currentUser=n.user,a.animateElementIn=function(e){e.removeClass("hidden"),e.addClass("animated fadeInUp")},a.animateElementOut=function(e){e.addClass("hidden"),e.removeClass("animated fadeInUp")},t.company.getTimelineHtml(n.user.user_id,n.company.id).then(function(e){o._DEBUG&&console.log(e),a.events=e.data},function(e){o._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("JoomlaModuleCtrl",["config","resourceService","ngZconnected",function(e,t,n){var o=this;e.module&&t.modules.getByName(e.module).then(function(e){n._DEBUG&&console.log(e),o.renderedHtml=e},function(e){n._DEBUG&&console.log(e)})}]).controller("JoomlaModuleEditCtrl",["joomlaModuleList",function(e){console.log(e);var t=this;t.modules=e}]),angular.module("jb-zconnect-widget-company").controller("JobPostCtrl",["resourceService","ngZconnected","$sce",function(e,t,n){var o=this;o.moduleHtml="",e.modules.getByName("mod_job_post").then(function(e){t._DEBUG&&console.log(e),o.moduleHtml=e},function(e){t._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("GeneralStatsCtrl",["companyService","config","jbWidget","ngZconnected","currentUser",function(e,t,n,o,a){var i=this;i.config=t,i.options={chart:{type:"lineChart",height:t.height,margin:{top:20,right:20,bottom:40,left:55},useInteractiveGuideline:!0,dispatch:{},xAxis:{axisLabel:"Date (MM-DD-YYYY)",showMaxMin:!1,staggerLabels:!0,tickFormat:function(e){return moment.unix(e).format("MM-DD-YYYY")}},yAxis:{axisLabel:"Count",axisLabelDistance:-10},x:function(e){return moment(e.date).unix()},y:function(e){return parseInt(e.count)}}},i.data=[],e.job.getApplicantGeneralStats(a.user_id,n.company.id).then(function(e){o._DEBUG&&console.log(e),i.data.push({key:"Applicants",values:e.data})},function(e){o._DEBUG&&console.log(e)}),e.job.getJobGeneralStats(a.user_id,n.company.id).then(function(e){o._DEBUG&&console.log(e),i.data.push({key:"Jobs",values:e.data})},function(e){o._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("DropCvCtrl",["config","employerService","jbWidget",function(e,t,n){var o=this;o.config=e;var a=n.apiRoot;o.dzAddedFile=function(e){n._DEBUG&&console.log(e)},o.dzError=function(e,t){n._DEBUG&&(console.log(t),console.log(e));var o=angular.element(e.previewElement);o.find(".dz-error-message").html(t.message)},o.dzSuccess=function(){console.log(argument)},o.dropzoneConfig={init:function(){console.log("init")},parallelUploads:1,maxFileSize:5,url:a+"/signup/upload/cv",method:"post",filesizeBase:1024,paramName:"fileToUpload",uploadMultiple:!1,addRemoveLinks:!0,clickable:!0,createImageThumbnails:!0,maxThumbnailFilesize:.5,thumbnailWidth:100,thumbnailHeight:100,dictDefaultMessage:null,dictFallbackMessage:null,dictFallbackText:null,dictInvalidFileType:null,dictFileTooBig:null,dictResponseError:null,dictCancelUpload:"Cancel",dictCancelUploadConfirmation:"Are you sure you want to cancel upload?",dictRemoveFile:"Remove",dictMaxFilesExceeded:null,acceptedFiles:"application/pdf,application/msword,"}}]),angular.module("jb-zconnect-widget-company").controller("ApplicantStatsCtrl",["config","jobService","jbWidget","ngZconnected","currentUser",function(e,t,n,o,a){var i=this;i.config=e,i.options={chart:{type:"lineChart",height:e.height,margin:{top:20,right:20,bottom:40,left:55},useInteractiveGuideline:!0,duration:1e3,clipEdge:!0,stacked:!1,dispatch:{},xAxis:{axisLabel:"Date (MM-DD-YYYY)",showMaxMin:!1,staggerLabels:!0,tickFormat:function(e){return moment.unix(e).format("MM-DD-YYYY")}},yAxis:{axisLabel:"Count",axisLabelDistance:-10},x:function(e){return moment(e.date).unix()},y:function(e){return parseInt(e.count)}}},i.data=[],t.applicants.getStats(a.user_id,n.company.id).then(function(e){i.data.push({key:"Applicants",values:e.data}),o._DEBUG&&console.log(e)},function(e){o._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("AdsCtrl",["config","resourceService","ngZconnected",function(e,t,n){var o=this;o.config=e,t.adList().then(function(e){n._DEBUG&&console.log(e),o.list=e},function(e){n._DEBUG&&console.log(e)})}])}(window);