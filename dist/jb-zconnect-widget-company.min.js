!function(e,t){"use strict";angular.module("jb-zconnect-widget-company",["adf.provider","nvd3","ngDropzone","ngSanitize","angular-timeline","angularMoment","ngAnimate","ngFileUpload","ngResource","angular-underscore","ngZconnected","ui.bootstrap","angular-scroll-animate"]).config(["dashboardProvider",function(e){Dropzone.autoDiscover=!1;var t="{widgetsPath}/jb-zconnect-widget-company/src/templates/",o={height:225,_DEBUG:!1},a={collapse:!1,frameless:!1,styleClass:"",reload:!0,resolve:{currentUser:["userService",function(e){return e.getCurrentUser()}]}};e.widget("general-stats",angular.extend(a,{title:"Company General Stats",description:"Widget for showing general information for company.",templateUrl:t+"general-stats.html",controller:"GeneralStatsCtrl",controllerAs:"generalStats",styleClass:"general-stats",config:angular.extend(o,{})})).widget("top-jobs",angular.extend(a,{title:"Company Top Jobs",description:"Widget for showing most applied jobs from company.",templateUrl:t+"top-jobs.html",controller:"TopJobsCtrl",controllerAs:"topJobs",styleClass:"top-jobs",config:angular.extend(o,{})})).widget("drop-cv",angular.extend(a,{title:"Company CV Dropzone",description:"Widget that provides a dropzone area for uploading applicants cv.",templateUrl:t+"drop-cv.html",controller:"DropCvCtrl",controllerAs:"dropCv",styleClass:"drop-cv",reload:!1,config:angular.extend(o,{})})).widget("ads",angular.extend(a,{title:"Advertisements",description:"Widget that shows advertisements.",templateUrl:t+"ads.html",controller:"AdsCtrl",controllerAs:"ads",styleClass:"ads",config:angular.extend(o,{})})).widget("timeline",angular.extend(a,{title:"Timeline",description:"Widget that shows company timeline/activities.",templateUrl:t+"timeline.html",controller:"TimelineCtrl",controllerAs:"timeline",styleClass:"timeline-container",config:angular.extend(o,{})})).widget("job-post-form",angular.extend(a,{title:"Job Post",description:"Widget that shows a form for job posting.",templateUrl:t+"job-post.html",controller:"JobPostCtrl",controllerAs:"jobPost",styleClass:"job-post-form",config:angular.extend(o,{})})).widget("applicant-stats",angular.extend(a,{title:"Applicant Stats",description:"Widget that shows visual statistics for total applicants of company.",templateUrl:t+"applicant-stats.html",controller:"ApplicantStatsCtrl",controllerAs:"applicantStats",styleClass:"applicant-stats",config:angular.extend(o,{})}))}]).provider("jbWidget",function(){var e=this,t="//jobsglobal.dev/api/v1",o={},a="jobsglobal.dev";return e.setSiteName=function(t){return a=t,e},e.setCompany=function(t){return o=t,e},e.setApiRoot=function(o){return t=o,e},e.$get=function(){return{apiRoot:t,company:o,siteName:a}},e}),angular.module("jb-zconnect-widget-company").run(["$templateCache",function(e){e.put("{widgetsPath}/jb-zconnect-widget-company/src/edit.html",'<form role=form><div class=form-group><label for=sample>Sample</label> <input type=text class=form-control id=sample ng-model=config.sample placeholder="Enter sample"></div></form>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/view.html","<div><h1>Widget view</h1><p>Content of {{config.sample}}</p></div>"),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/ads.html",'<div style="height: {{ads.config.height}}px !important"><uib-carousel active=active interval=2000><uib-slide ng-repeat="ad in ads.list" index=ad.id><img ng-src={{ad.image}} style=margin:auto;><div class=carousel-caption><h4 data-ng-bind=ad.title></h4><p data-ng-bind=ad.message></p></div></uib-slide></uib-carousel></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/applicant-stats.html",'<div style="height: {{applicantStats.config.height}}px !important;overflow: auto"><nvd3 options=applicantStats.options data=applicantStats.data></nvd3></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/drop-cv.html","<div><form class=dropzone method=post enctype=multipart/form-data ng-dropzone dropzone=dropCv.dropzone data-dropzone-config=dropCv.dropzoneConfig data-event-handlers=\"{ 'addedfile': dropCv.dzAddedFile, 'error': dropCv.dzError, success: dropCv.dzSuccess }\" style=\"min-height: {{dropCv.config.height}}px\"><div class=dz-message>Drop CV here or click to upload</div></form></div>"),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/general-stats.html",'<div style="height: {{generalStats.config.height}}px !important;overflow: auto"><nvd3 options=generalStats.options data=generalStats.data></nvd3></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/job-post.html",'<div style="height: {{jobPost.config.height}}px !important;float: left;overflow: auto;width:100%"><form class=job_horizontal name=jobPostForm novalidate data-ng-submit=jobPost.saveJobPosts(jobPostForm)><div class=modal-body><div class="col-lg-12 col-sm-12 col-xs-12"><div class=row><ul class=job_post_modal_ul><li><p>Vacancy title</p><input type=text data-ng-model=jobPost.jobGroup.name name=groupName data-ng-required=true><div class=registration_error data-ng-show="jobPostForm.groupName.$error.required && (jobPostForm.groupName.$touched || jobPostForm.$submitted)"><h6>Please specify vacancy title.</h6></div></li><li><ul class=job_post_inner_ul><li><p>Start date</p><div class="col-lg-12 col-sm-12 col-xs-12"><div class="row select-container"><p class=input-group><input type=text class=form-control name=dateStart data-uib-datepicker-popup=MM/dd/yyyy data-ng-model=jobPost.jobGroup.date_start data-is-open=dateStart.opened data-datepicker-options=jobPost.dateStartOptions data-ng-required=true data-close-text=Close data-alt-input-formats=altInputFormats> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="dateStart.opened = true"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=registration_error data-ng-show="jobPostForm.dateStart.$error.required && (jobPostForm.dateStart.$touched || jobPostForm.$submitted)"><h6>Please specify vacancies starting date.</h6></div></div></div></li><li><p>End date</p><div class="col-lg-12 col-sm-12 col-xs-12"><div class="row select-container"><p class=input-group><input type=text class=form-control name=dateEnd data-uib-datepicker-popup=MM/dd/yyyy data-ng-model=jobPost.jobGroup.date_end data-is-open=dateEnd.opened data-datepicker-options=jobPost.dateEndOptions data-ng-required=true data-close-text=Close data-min-date=jobPost.jobGroup.start_date data-alt-input-formats=altInputFormats> <span class=input-group-btn><button type=button class="btn btn-default" ng-click="dateEnd.opened = true"><i class="glyphicon glyphicon-calendar"></i></button></span></p><div class=registration_error data-ng-show="jobPostForm.dateEnd.$error.required && (jobPostForm.dateEnd.$touched || jobPostForm.$submitted)"><h6>Please specify vacancies ending date.</h6></div></div></div></li></ul></li><li style=width:100%><p>Description</p><textarea name=jobGroupDescription data-ng-model=jobPost.jobGroup.description></textarea></li></ul><div class="col-lg-12 col-sm-12 col-xs-12"><div class=row><h4 class=company_job_edit_head><i class="fa fa-globe" aria-hidden=true></i>Location</h4></div></div><ul class=job_post_modal_ul><li><p>Industry<span class=require_star>*</span></p><div class="col-lg-12 col-sm-12 col-xs-12"><div class="row select-container"><select name=industry data-ng-options="industry.description as industry.description for industry in jobPost.industries" data-ng-model=jobPost.jobGroup.industry data-ng-required=true><option disabled selected>Select Industry</option></select><span class=arrow aria-hidden=true></span><div class=registration_error data-ng-show="jobPostForm.industry.$error.required && (jobPostForm.industry.$touched || jobPostForm.$submitted)"><h6>Please specify industry</h6></div></div></div></li><li><p>Country<span class=require_star>*</span></p><div class="col-lg-12 col-sm-12 col-xs-12"><div class="row select-container"><select name=country data-ng-model=jobPost.jobGroup.country data-ng-options="country as country.nicename for country in jobPost.countries" data-ng-change=jobPost.getStates(jobPost.jobGroup.country) data-ng-required=true><option disabled selected>Select Country</option></select><span class=arrow aria-hidden=true></span><div class=registration_error data-ng-show="jobPostForm.country.$error.required && (jobPostForm.country.$touched || jobPostForm.$submitted)"><h6>Please specify country</h6></div></div></div></li><li class=state data-ng-show="jobPost.jobGroup.country && jobPost.states.length > 0"><p>State<span class=require_star>*</span></p><div class="col-lg-12 col-sm-12 col-xs-12"><div class="row select-container"><select name=state class=default_input_select data-ng-model=jobPost.jobGroup.state data-ng-change=jobPost.getCities(jobPost.jobGroup.state) data-ng-required="jobPost.states && jobPost.states.length" data-ng-options="state as state.name for state in jobPost.states"><option disabled selected>Select State</option></select><span class=arrow aria-hidden=true></span><div class=registration_error data-ng-show="jobPostForm.state.$error.required && (jobPostForm.state.$touched || jobPostForm.$submitted)"><h6>Please specify state</h6></div></div></div></li><li class=cityDv data-ng-show="jobPost.jobGroup.state && jobPost.cities.length > 0"><p>City</p><div class="col-lg-12 col-sm-12 col-xs-12"><div class="row select-container"><select name=city class=default_input_select data-ng-model=jobPost.jobGroup.city data-ng-required="jobPost.cities && jobPost.cities.length" data-ng-options="city as city.name for city in jobPost.cities"><option disabled selected>Select City</option></select><span class=arrow aria-hidden=true></span><div class=registration_error data-ng-show="jobPostForm.city.$error.required && (jobPostForm.city.$touched || jobPostForm.$submitted)"><h6>Please specify city</h6></div></div></div></li></ul><div class="col-lg-12 col-sm-12 col-xs-12"><div class=row><h4 class=company_job_edit_head><i class="fa fa-suitcase" aria-hidden=true></i>Work Information</h4></div></div><ul class="job_post_modal_ul addPosition" data-ng-repeat="job in jobPost.newJobs"><li><p>Position<span class=require_star>*</span></p><div class="col-lg-12 col-sm-12 col-xs-12"><div class=row><input id=title name=title{{$index}} type=text class=title data-ng-model=job.job_title data-ng-required=true data-ng-maxlength=125 maxlength=125><div class=registration_error data-ng-show="jobPostForm.title{{$index}}.$error.required && (jobPostForm.title{{$index}}.$touched || jobPostForm.$submitted)"><h6>Please specify position</h6></div></div></div></li><li><p>Experience<span class=require_star>*</span></p><div class="col-lg-12 col-sm-12 col-xs-12"><div class="row select-container"><select name=experience{{$index}} class=yearsofexp data-ng-model=job.experience data-ng-options="i as i for i in jobPost.expYears" data-ng-required=true><option disabled selected>Select Experience</option></select><span class=arrow aria-hidden=true></span><div class=registration_error data-ng-show="jobPostForm.experience{{$index}}.$error.required && (jobPostForm.experience{{$index}}.$touched || jobPostForm.$submitted)"><h6>Please specify experience</h6></div></div></div></li><li><p>Currency<span class=require_star data-ng-show="(job.salary > 0)">*</span></p><div class="col-lg-12 col-sm-12 col-xs-12"><div class="row select-container"><select name=currency{{$index}} data-ng-model=job.currency data-ng-required="(job.salary > 0)" data-ng-options="currency.currency_code as currency.currency_code for currency in jobPost.currencies"><option disabled selected>Select currency</option></select><span class=arrow aria-hidden=true></span><div class=registration_error data-ng-show="jobPostForm.currency{{$index}}.$error.required && (jobPostForm.currency{{$index}}.$touched || jobPostForm.$submitted)"><h6>Please specify currency</h6></div></div></div></li><li><p>Salary</p><input name=salary{{$index}} type=number value=0 class=salary data-ng-model=job.salary></li><li><p>Upload Photo</p><img data-ngf-thumbnail=job.image class=job_post_img><div class=job_post_upload_photo data-ng-model=job.image data-name=image{{$index}} data-ngf-pattern="\'image/*\'" data-ngf-accept="\'image/*\'" data-ngf-max-size=5MB data-ngf-min-height=100 data-ngf-min-width=100 data-ngf-max-height=2160 data-ngf-max-width=2160 data-ngf-fix-orientation=true data-ngf-resize=jobPost.resizeOptions($file) data-ngf-resize-if="$width > 1024 || $height > 1024" data-ngf-select><button type=button class=job_post_photo_browse>Select job Photo</button></div></li><li><p>Job Details<span class=require_star>*</span></p><div class="col-lg-12 col-sm-12 col-xs-12"><div class=row><textarea class=details name=details{{$index}} data-ng-model=job.job_description maxlength=5000 data-ng-required=true></textarea><div class=registration_error data-ng-show="jobPostForm.details{{$index}}.$error.required && (jobPostForm.details{{$index}}.$touched || jobPostForm.$submitted)"><h6>Please specify details</h6></div></div></div></li></ul><div class="col-lg-12 col-sm-12 col-xs-12"><div class=row><a class=add_btn_edit data-ng-click=jobPost.addPosition(jobPostForm)><i class="fa fa-plus-circle"></i>Add Position</a></div></div></div></div><div class="col-lg-12 col-sm-12 col-xs-12"><div class=row><ul class="apply_modal_buttonset button_set_margin"><li><button type=submit><i class="fa fa-envelope" aria-hidden=true></i>Post</button></li></ul></div></div><zloader data-ng-show=jobPost.loader></zloader></div></form></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/timeline.html","<div class=timeline-container style=\"max-height: {{timeline.config.height}}px !important;\"><timeline><timeline-event ng-repeat=\"event in timeline.events\"><timeline-badge class=\"actor-avatar timeline-hidden\" when-visible=timeline.animateElementIn when-not-visible=timeline.animateElementOut bind-scroll-to=.timeline-container><img class=img-responsive data-ng-src={{event.actor.avatar}} alt={{event.actor.first_name}}></timeline-badge><timeline-panel class=\"{{event.badgeClass}} timline-hidden\" when-visible=timeline.animateElementIn when-not-visible=timeline.animateElementOut bind-scroll-to=.timeline-container><timeline-heading data-ng-switch data-on=event.app><span class=pull-right am-time-ago=\"event.created | amUtc\"></span> <span class=title-header data-ng-switch-when=groups.wall>{{(event.actor.user_id==timeline.currentUser.user_id) ? \"You\" : event.actor.first_name}} posted a status.<h4 data-ng-bind-html=event.title></h4></span> <span class=title-header data-ng-switch-when=groups.jobpost>{{event.actor.first_name}} posted a job.<h4 data-ng-bind-html=event.title></h4></span> <span class=title-header data-ng-switch-when=groups.join><ng-pluralize count=event.actors.length when=\"{ '0': '', '1': '{{event.actors[0].first_name}} has joined the company.', '2': '{{event.actors[0].first_name}} and {{event.actors[1].first_name}} have joined the company.', 'one': '{{event.actors[0].first_name}} and {{event.actors[1].first_name}} and one other have joined the company.', 'other': '{{event.actors[0].first_name}} and {{event.actors[1].first_name}} and {} other have joined the company.' }\" offset=2></ng-pluralize></span> <span class=title-header data-ng-switch-when=videos>{{event.actor.first_name}} posted a video.<br><h5><a data-ng-href={{event.params.video_url}}>Link</a> to video.</h5></span> <span class=title-header data-ng-switch-when=photos>{{event.actor.first_name}} posted a photo.<br><h5><a data-ng-href={{event.params.photo_url}}>Link</a> to photo.</h5></span> <span class=title-header data-ng-switch-when=events>{{event.actor.first_name}} posted an event.<br><h5><a data-ng-href={{event.params.event_url}}>Link</a> to event.</h5></span></timeline-heading><p data-ng-bind-html=event.content></p></timeline-panel></timeline-event></timeline></div>"),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/top-jobs.html",'<div><ol class=dashbord_top_jobs><li><ul class=dashbord_top_jobs_ul-1><li class="col-lg-8 col-sm-8 col-xs-8"><h4>Position</h4></li><li class="col-lg-4 col-sm-4 col-xs-4"><h4>Applicants</h4></li></ul></li><li style="height: {{topJobs.config.height}}px !important;overflow: auto"><ul class=dashbord_top_jobs_ul-2 data-ng-repeat="job in topJobs.data"><li class="col-lg-8 col-sm-8 col-xs-8"><p data-ng-bind=job.job_title></p></li><li class="col-lg-4 col-sm-4 col-xs-4"><p class=text-center data-ng-bind=job.total></p></li></ul></li></ol></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/widget.html",'<div adf-id={{definition.wid}} adf-widget-type={{definition.type}} ng-class="widgetClasses(widget, definition)" class=widget><div class="panel-heading clearfix" ng-if="!widget.frameless || editMode"><h3 class=panel-title>see {{definition.title}} <span class=pull-right><a title="{{ translate(\'ADF_WIDGET_TOOLTIP_REFRESH\') }}" ng-if=widget.reload ng-click=reload()><i class="glyphicon glyphicon-refresh"></i></a><a title="{{ translate(\'ADF_WIDGET_TOOLTIP_MOVE\') }}" class=adf-move ng-if=editMode><i class="glyphicon glyphicon-move"></i></a><a title="{{ translate(\'ADF_WIDGET_TOOLTIP_COLLAPSE\') }}" ng-show="options.collapsible && !widgetState.isCollapsed" ng-click="widgetState.isCollapsed = !widgetState.isCollapsed"><i class="glyphicon glyphicon-minus"></i></a><a title="{{ translate(\'ADF_WIDGET_TOOLTIP_EXPAND\') }}" ng-show="options.collapsible && widgetState.isCollapsed" ng-click="widgetState.isCollapsed = !widgetState.isCollapsed"><i class="glyphicon glyphicon-plus"></i></a><a title="{{ translate(\'ADF_WIDGET_TOOLTIP_EDIT\') }}" ng-click=edit() ng-if=editMode><i class="glyphicon glyphicon-cog"></i></a> <a title="{{ translate(\'ADF_WIDGET_TOOLTIP_FULLSCREEN\') }}" ng-click=openFullScreen() ng-show=options.maximizable><i class="glyphicon glyphicon-fullscreen"></i></a><a title="{{ translate(\'ADF_WIDGET_TOOLTIP_REMOVE\') }}" ng-click=remove() ng-if=editMode><i class="glyphicon glyphicon-remove"></i></a></span></h3></div><div ng-class="{\'panel-body\':!widget.frameless || editMode}" uib-collapse=widgetState.isCollapsed><adf-widget-content model=definition content=widget></adf-widget-content></div></div>')}]),angular.module("jb-zconnect-widget-company").controller("TopJobsCtrl",["config","jobService","jbWidget","ngZconnected","currentUser",function(e,t,o,a,n){var i=this;i.data=[],i.config=e,t.getMostApplied(n.user_id,o.company.id,o.limit).then(function(e){a._DEBUG&&console.log(e),i.data=e.data},function(e){a._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("TimelineCtrl",["config","companyService","jbWidget","ngZconnected","currentUser",function(e,t,o,a,n){var i=this;i.config=e,i.currentUser=n,i.animateElementIn=function(e){e.removeClass("timeline-hidden"),e.addClass("animated fadeInUp")},i.animateElementOut=function(e){e.addClass("timeline-hidden"),e.removeClass("animated fadeInUp")},t.company.getTimelineHtml(i.currentUser.user_id,o.company.id).then(function(e){a._DEBUG&&console.log(e),i.events=e.data},function(e){a._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("JobPostCtrl",["resourceService","currentUser","jobService","$q","ngZconnected","jbWidget","companyService","employerService",function(e,t,o,a,n,i,s,l){var r=this;r.loader=!0,r.jobImages=[],r.baseUrl=n.baseUrl,r.companyId=i.company.id,r.newJobs=[],r.expYears=_.range(0,51),r.currentUser=t,r.jobGroup={start_date:new Date},r.dateStartOptions={maxDate:new Date(2020,5,22),minDate:new Date},r.dateEndOptions={maxDate:new Date(2020,5,22)},a.when(s.company.get(r.currentUser.user_id,r.companyId)).then(function(e){n._DEBUG&&console.log(e),r.company=e,r.addPosition(),r.loader=!1},function(e){n._DEBUG&&console.log(e)}),e.currencyList.get().then(function(e){r.currencies=e},function(e){n._DEBUG&&console.log(e)}),e.industryList.get().then(function(e){r.industries=e},function(e){n._DEBUG&&console.log(e)}),e.countryList.get().then(function(e){r.countries=e},function(e){n._DEBUG&&console.log(e)}),r.uploadJobPhoto=function(e,t){var i=a.defer();return o.uploadPhoto(r.currentUser.user_id,r.companyId,t.id,t.image).then(function(e){t.image=e.data.data,i.resolve(e)},function(e){n._DEBUG&&console.log(e),i.reject(e)}),i.promise},r.resizeOptions=function(e){console.log(e)},r.saveJobPosts=function(e){e.$valid?(r.loader=!0,a.when(l.jobGroup.save(r.currentUser.user_id,r.companyId,r.jobGroup)).then(function(e){r.jobGroup.id=e.data;var t=[];console.log(r.newJobs),r.newJobs.forEach(function(e){e.job_group_id=r.jobGroup.id,t.push(o.save(r.currentUser.user_id,r.companyId,e))}),a.all(t).then(function(e){console.log(e);for(var t=[],o=0;o<e.length;o++){var n=r.newJobs[o],i=e[o];n.id=i.data;var s=n.image;s&&t.push(r.uploadJobPhoto(s,n))}return a.all(t)}).then(function(e){n._DEBUG&&console.log(e),n.helpers.showSystemMessage("Succesfully posted job/s.","message"),r.newJobs=[],r.addPosition(),r.loader=!1,angular.element("#jobPostModal").modal("hide"),location.reload()},function(e){n._DEBUG&&console.log(e)})})):n._DEBUG&&console.log(e.$error)},r.getStates=function(t){e.stateList.get(t.id).then(function(e){r.states=e},function(e){n._DEBUG&&console.log(e)})},r.getCities=function(t){e.cityList.get(r.jobGroup.country.id,t.id).then(function(e){r.cities=e},function(e){n._DEBUG&&console.log(e)})},r.addPosition=function(e){var t={};e&&e.$valid?r.newJobs.push(t):r.newJobs.push(t)},r.cancelJobPost=function(){r.newJobs=[],r.addPosition()},r.dateStartChanged=function(){r.dateEndOptions.minDate=r.jobGroup.start_date}}]),angular.module("jb-zconnect-widget-company").controller("GeneralStatsCtrl",["companyService","config","jbWidget","ngZconnected","currentUser",function(e,t,o,a,n){var i=this;i.currentUser=n,i.config=t,i.options={chart:{type:"lineChart",height:t.height,margin:{top:20,right:20,bottom:40,left:55},useInteractiveGuideline:!0,dispatch:{},xAxis:{axisLabel:"Date (MM-DD-YYYY)",showMaxMin:!1,staggerLabels:!0,tickFormat:function(e){return moment.unix(e).format("MM-DD-YYYY")}},yAxis:{axisLabel:"Count",axisLabelDistance:-10},x:function(e){return moment(e.date).unix()},y:function(e){return parseInt(e.count)}}},i.data=[],e.job.getApplicantGeneralStats(i.currentUser.user_id,o.company.id).then(function(e){a._DEBUG&&console.log(e),i.data.push({key:"Applicants",values:e.data})},function(e){a._DEBUG&&console.log(e)}),e.job.getJobGeneralStats(i.currentUser.user_id,o.company.id).then(function(e){a._DEBUG&&console.log(e),i.data.push({key:"Jobs",values:e.data})},function(e){a._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("DropCvCtrl",["config","employerService","jbWidget","ngZconnected","currentUser","registrationService","resourceService",function(e,t,o,a,n,i,s){var l=this;l.config=e,l.currentUser=n,l.company=o.company;var r=o.apiRoot;l.dzAddedFile=function(e){a._DEBUG&&console.log(e)},l.dzError=function(e,t){a._DEBUG&&(console.log(t),console.log(e));var o=angular.element(e.previewElement);o.find(".dz-error-message").html(t.message)},l.dzSuccess=function(e,o,n){if(o.success){a._DEBUG&&console.log(o);var i={};i.addinfo=angular.fromJson(o.data.addinfo),i.education=angular.fromJson(o.data.education).phase,i.image=angular.fromJson(o.data.image),i.personal=c(angular.fromJson(o.data.personal)),i.experience=angular.fromJson(o.data.workexperience).phase}else switch(o.error){case 4:t.cv.saveToCompany(l.currentUser.user_id,l.company.id,o.data.id).then(function(e){a._DEBUG&&console.log(e)},function(e){a._DEBUG&&console.log(e)})}},l.dropzoneConfig={init:function(){console.log("init")},parallelUploads:1,maxFileSize:5,url:r+"/signup/upload/cv",method:"post",filesizeBase:1024,paramName:"fileToUpload",uploadMultiple:!1,addRemoveLinks:!0,clickable:!0,createImageThumbnails:!0,maxThumbnailFilesize:.5,thumbnailWidth:100,thumbnailHeight:100,dictDefaultMessage:null,dictFallbackMessage:null,dictFallbackText:null,dictInvalidFileType:null,dictFileTooBig:null,dictResponseError:null,dictCancelUpload:"Cancel",dictCancelUploadConfirmation:"Are you sure you want to cancel upload?",dictRemoveFile:"Remove",dictMaxFilesExceeded:null,acceptedFiles:"application/pdf,application/msword,"};var c=function(e){var t=JSON.parse(e),o={};if(o.jsfirstname=t.firstname,o.jslastname=t.lastname,_.isArray(t.email)){var a=t.email;o.jsemail=a[0]}else o.jsemail=t.email;"undefined"!=typeof t.phoneNumber&&(_.isArray(t.phoneNumber)?o.jsmobile=t.phoneNumber[0].replace(/\D/g,""):o.jsmobile=t.phoneNumber.replace(/\D/g,""))}}]),angular.module("jb-zconnect-widget-company").controller("ApplicantStatsCtrl",["config","jobService","jbWidget","ngZconnected","currentUser",function(e,t,o,a,n){var i=this;i.config=e,i.options={chart:{type:"lineChart",height:e.height,margin:{top:20,right:20,bottom:40,left:55},useInteractiveGuideline:!0,duration:1e3,clipEdge:!0,stacked:!1,dispatch:{},xAxis:{axisLabel:"Date (MM-DD-YYYY)",showMaxMin:!1,staggerLabels:!0,tickFormat:function(e){return moment.unix(e).format("MM-DD-YYYY")}},yAxis:{axisLabel:"Count",axisLabelDistance:-10},x:function(e){return moment(e.date).unix()},y:function(e){return parseInt(e.count)}}},i.data=[],i.currentUser=n,t.applicants.getStats(i.currentUser.user_id,o.company.id).then(function(e){i.data.push({key:"Applicants",values:e.data}),a._DEBUG&&console.log(e)},function(e){a._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("AdsCtrl",["config","resourceService","ngZconnected",function(e,t,o){var a=this;a.config=e,t.adList().then(function(e){o._DEBUG&&console.log(e),a.list=e},function(e){o._DEBUG&&console.log(e)})}])}(window);