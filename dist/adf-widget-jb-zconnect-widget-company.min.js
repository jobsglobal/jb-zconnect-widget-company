!function(e,t){"use strict";angular.module("jb-zconnect-widget-company",["adf.provider","nvd3","ngDropzone","slick","ngSanitize"]).config(["dashboardProvider",function(e){Dropzone.autoDiscover=!1;var t={height:225,_DEBUG:!1},n={collapse:!1,frameless:!1,styleClass:"",reload:!0,resolve:{}};e.widget("general-stats",angular.extend(n,{title:"Company General Stats",description:"Widget for showing general information for company.",templateUrl:"{widgetsPath}/jb-zconnect-widget-company/src/templates/general-stats.html",controller:"GeneralStatsCtrl",controllerAs:"generalStats",config:angular.extend(t,{})})).widget("top-jobs",angular.extend(n,{title:"Company Top Jobs",description:"Widget for showing most applied jobs from company.",templateUrl:"{widgetsPath}/jb-zconnect-widget-company/src/templates/top-jobs.html",controller:"TopJobsCtrl",controllerAs:"topJobs",config:angular.extend(t,{})})).widget("drop-cv",angular.extend(n,{title:"Company CV Dropzone",description:"Widget that provides a dropzone area for uploading applicants cv.",templateUrl:"{widgetsPath}/jb-zconnect-widget-company/src/templates/drop-cv.html",controller:"DropCvCtrl",controllerAs:"dropCv",reload:!1,config:angular.extend(t,{})})).widget("ads",angular.extend(n,{title:"Advertisements",description:"Widget that shows advertisements.",templateUrl:"{widgetsPath}/jb-zconnect-widget-company/src/templates/ads.html",controller:"AdsCtrl",controllerAs:"ads",config:angular.extend(t,{})})).widget("timeline",angular.extend(n,{title:"Timeline",description:"Widget that shows company timeline/activities.",templateUrl:"{widgetsPath}/jb-zconnect-widget-company/src/templates/timeline.html",controller:"TimelineCtrl",controllerAs:"timeline",config:angular.extend(t,{})}))}]),angular.module("jb-zconnect-widget-company").run(["$templateCache",function(e){e.put("{widgetsPath}/jb-zconnect-widget-company/src/edit.html",'<form role=form><div class=form-group><label for=sample>Sample</label> <input type=text class=form-control id=sample ng-model=config.sample placeholder="Enter sample"></div></form>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/view.html","<div><h1>Widget view</h1><p>Content of {{config.sample}}</p></div>"),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/ads.html",'<div class=ads style="height: {{ads.config.height}}px !important"><slick slides-to-show=1 data=ads.list slides-to-scroll=1 autoplay=true autoplayspeed=2 arrows=true centermode=true dots=true init-onload=true><div data-ng-repeat="ad in ads.list" class="text-center container"><a data-ng-href={{ad.link}}><img data-ng-src={{ad.image}} alt={{ad.title}}> <span class=ad-message>{{ad.message}}</span></a></div></slick></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/drop-cv.html",'<div class=drop-cv style="height: {{dropCv.config.height}}px !important;"><form class=dropzone method=post enctype=multipart/form-data ng-dropzone dropzone=dropCv.dropzone dropzone-config=dropCv.dropzoneConfig event-handlers="{ \'addedfile\': dropCv.dzAddedFile, \'error\': dropCv.dzError }" style="min-height: {{dropCv.config.height}}px"><div class=dz-message>Drop CV here or click to upload</div></form></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/general-stats.html",'<div class=general-stats style="height: {{generalStats.config.height}}px !important;overflow: auto"><nvd3 options=generalStats.options data=generalStats.data></nvd3></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/timeline.html",'<div class=timeline style="height: {{timeline.config.height}}px !important"><timeline><timeline-event ng-repeat="event in timeline.events" side=right><timeline-badge class={{event.badgeClass}}><i class="glyphicon {{event.badgeIconClass}}"></i></timeline-badge><timeline-panel class={{event.badgeClass}}><timeline-heading><h4 data-ng-bind-html=event.title></h4></timeline-heading><p data-ng-bind-html=event.content></p></timeline-panel></timeline-event></timeline></div>'),e.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/top-jobs.html",'<div class=top-jobs style="height: {{topJobs.config.height}}px !important;overflow: auto"><table class="table table-striped table-responsive"><tr><th>Position</th><th>Applicants</th></tr><tr data-ng-repeat="job in topJobs.data"><td data-ng-bind="job.job_title | limitTo: 20"></td><td class=text-center data-ng-bind=job.total></td></tr></table></div>')}]),angular.module("jb-zconnect-widget-company").service("topJobsService",["$http","$q","jbWidget",function(e,t,n){var o=this,i=n.apiRoot;o.mostApplied=function(n,o,a,l,r){var c=t.defer(),s=i+"/employer/"+n+"/company/"+o+"/job/listWithApplicants?callback=JSON_CALLBACK";return a&&(s+="&limit="+a),e.jsonp(s).then(function(e){c.resolve(e.data)},function(e){c.reject(e)}),c.promise}}]),angular.module("jb-zconnect-widget-company").service("timelineService",["$http","$q","dashboard","jbWidget",function(e,t,n,o){var i=o.apiRoot,a=this;a.getTimelineHtml=function(n,o){var a=t.defer();return e.jsonp(i+"/employer/"+n+"/company/"+o+"/activities?callback=JSON_CALLBACK").then(function(e){a.resolve(e.data)},function(e){a.reject(e)}),a.promise}}]),angular.module("jb-zconnect-widget-company").provider("jbWidget",function(){var e=this,t="//jobsglobal.dev/api/v1";e.setApiRoot=function(e){t=e},e.$get=[function(){return{apiRoot:t}}]}),angular.module("jb-zconnect-widget-company").service("generalStatsService",["$http","$q","jbWidget",function(e,t,n){var o=this,i=n.apiRoot;o.job=function(n,o){var a=t.defer();return e.jsonp(i+"/employer/"+n+"/company/"+o+"/job/stats?callback=JSON_CALLBACK").then(function(e){a.resolve(e.data)},function(e){a.reject(e)}),a.promise},o.applicant=function(n,o){var a=t.defer();return e.jsonp(i+"/employer/"+n+"/company/"+o+"/applicant/stats?callback=JSON_CALLBACK").then(function(e){a.resolve(e.data)},function(e){a.reject(e)}),a.promise}}]),angular.module("jb-zconnect-widget-company").service("dropCvService",["$http","$q","jbWidget",function(e,t,n){}]),angular.module("jb-zconnect-widget-company").service("adsService",["$http","$q","dashboard","jbWidget",function(e,t,n,o){var i=o.apiRoot,a=this;a.getAll=function(){var n=t.defer();return e.jsonp(i+"/ads?callback=JSON_CALLBACK").then(function(e){n.resolve(e.data)},function(e){n.reject(e)}),n.promise}}]),angular.module("jb-zconnect-widget-company").controller("TopJobsCtrl",["config","topJobsService",function(e,t){var n=this;n.data=[],n.config=e,t.mostApplied(e.user.user_id,e.company.id,e.limit).then(function(t){e._DEBUG&&console.log(t),n.data=t.data},function(t){e._DEBUG&&console.log(t)})}]),angular.module("jb-zconnect-widget-company").controller("TimelineCtrl",["config","timelineService",function(e,t){var n=this;n.config=e,t.getTimelineHtml(e.user.user_id,e.company.id).then(function(t){e._DEBUG&&console.log(t),n.events=t.data},function(t){e._DEBUG&&console.log(t)})}]),angular.module("jb-zconnect-widget-company").controller("GeneralStatsCtrl",["generalStatsService","config",function(e,t){var n=this;n.config=t,n.options={chart:{type:"lineChart",height:t.height,margin:{top:20,right:20,bottom:40,left:55},useInteractiveGuideline:!0,dispatch:{},xAxis:{axisLabel:"Date (MM-DD-YYYY)",showMaxMin:!1,staggerLabels:!0,tickFormat:function(e){return moment.unix(e).format("MM-DD-YYYY")}},yAxis:{axisLabel:"Count",axisLabelDistance:-10},x:function(e){return moment(e.date).unix()},y:function(e){return parseInt(e.count)}}},n.data=[],e.applicant(t.user.user_id,t.company.id).then(function(e){t._DEBUG&&console.log(e),n.data.push({key:"Applicants",values:e.data})},function(e){t._DEBUG&&console.log(e)}),e.job(t.user.user_id,t.company.id).then(function(e){t._DEBUG&&console.log(e),n.data.push({key:"Jobs",values:e.data})},function(e){t._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("DropCvCtrl",["config","dropCvService","$log",function(e,t,n){var o=this;o.config=e,o.dzAddedFile=function(e){n.log(e)},o.dzError=function(e,t){n.log(t)},o.dropzoneConfig={init:function(){},parallelUploads:1,maxFileSize:5,url:e.apiRoot+"",method:"post",filesizeBase:1024,paramName:"cv",uploadMultiple:!1,addRemoveLinks:!0,clickable:!0,createImageThumbnails:!0,maxThumbnailFilesize:.5,thumbnailWidth:100,thumbnailHeight:100,dictDefaultMessage:null,dictFallbackMessage:null,dictFallbackText:null,dictInvalidFileType:null,dictFileTooBig:null,dictResponseError:null,dictCancelUpload:"Cancel",dictCancelUploadConfirmation:"Are you sure you want to cancel upload?",dictRemoveFile:"Remove",dictMaxFilesExceeded:null}}]),angular.module("jb-zconnect-widget-company").controller("AdsCtrl",["config","adsService",function(e,t){var n=this;n.config=e,t.getAll().then(function(t){e._DEBUG&&console.log(t),n.list=t},function(t){e._DEBUG&&console.log(t)})}])}(window);