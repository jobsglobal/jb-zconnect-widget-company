!function(t,e){"use strict";angular.module("jb-zconnect-widget-company",["adf.provider","nvd3"]).config(["dashboardProvider",function(t){var e={reload:!0,resolve:{},edit:{templateUrl:"{widgetsPath}/github/src/edit.html"},config:{height:225,apiRoot:"/api/v1",_DEBUG:!1,user:{user_id:0},company:{id:0}}};t.widget("general-stats",angular.extend({title:"Company General Stats",description:"Widget for showing general information for company.",templateUrl:"{widgetsPath}/jb-zconnect-widget-company/src/templates/general-stats.html",controller:"GeneralStatsCtrl",controllerAs:"generalStats"},e)).widget("top-jobs",angular.extend({title:"Company General Stats",description:"Widget for showing general information for company.",templateUrl:"{widgetsPath}/jb-zconnect-widget-company/src/templates/top-jobs.html",controller:"TopJobsCtrl",controllerAs:"topJobs"},e))}]),angular.module("jb-zconnect-widget-company").run(["$templateCache",function(t){t.put("{widgetsPath}/jb-zconnect-widget-company/src/edit.html",'<form role=form><div class=form-group><label for=sample>Sample</label> <input type=text class=form-control id=sample ng-model=config.sample placeholder="Enter sample"></div></form>'),t.put("{widgetsPath}/jb-zconnect-widget-company/src/view.html","<div><h1>Widget view</h1><p>Content of {{config.sample}}</p></div>"),t.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/general-stats.html","<nvd3 options=generalStats.options data=generalStats.data></nvd3>"),t.put("{widgetsPath}/jb-zconnect-widget-company/src/templates/top-jobs.html",'<table class="table table-striped table-responsive"><tr><th>Position</th><th>Applicants</th></tr><tr data-ng-repeat="job in topJobs.data | limitTo: topJobs.limit"><td data-ng-bind="job.job_title | limitTo: 20"></td><td class=text-center data-ng-bind=job.total></td></tr></table>')}]),angular.module("jb-zconnect-widget-company").factory("topJobsService",["$http","$q",function(t,e){return{mostApplied:function(n,o,a,i,r,l){var c=e.defer(),s=n+"/employer/"+o+"/company/"+a+"/job/listWithApplicants?callback=JSON_CALLBACK";return i&&(s+="&limit="+i),t.jsonp(s).then(function(t){c.resolve(t.data)},function(t){c.reject(t)}),c.promise}}}]),angular.module("jb-zconnect-widget-company").factory("generalStatsService",["$http","$q",function(t,e){return{job:function(n,o,a){var i=e.defer();return t.jsonp(n+"/employer/"+o+"/company/"+a+"/job/stats?callback=JSON_CALLBACK").then(function(t){i.resolve(t.data)},function(t){i.reject(t)}),i.promise},applicant:function(n,o,a){var i=e.defer();return t.jsonp(n+"/employer/"+o+"/company/"+a+"/applicant/stats?callback=JSON_CALLBACK").then(function(t){i.resolve(t.data)},function(t){i.reject(t)}),i.promise}}}]),angular.module("jb-zconnect-widget-company").controller("TopJobsCtrl",["config","topJobsService",function(t,e){var n=this;n.data=[],e.mostApplied(t.apiRoot,t.user.user_id,t.company.id,t.limit).then(function(e){t._DEBUG&&console.log(e),n.data=e.data},function(e){t._DEBUG&&console.log(e)})}]),angular.module("jb-zconnect-widget-company").controller("GeneralStatsCtrl",["generalStatsService","config",function(t,e){var n=this;n.options={chart:{type:"lineChart",height:e.height,margin:{top:20,right:20,bottom:40,left:55},useInteractiveGuideline:!0,dispatch:{},xAxis:{axisLabel:"Date (MM-DD-YYYY)",showMaxMin:!1,staggerLabels:!0,tickFormat:function(t){return moment.unix(t).format("MM-DD-YYYY")}},yAxis:{axisLabel:"Count",axisLabelDistance:-10},x:function(t){return moment(t.date).unix()},y:function(t){return parseInt(t.count)}},title:{enable:!0,text:"Company Statistics"},subtitle:{enable:!1,text:"",css:{"text-align":"center",margin:"10px 13px 0px 7px"}}},n.data=[],t.applicant(e.apiRoot,e.user.user_id,e.company.id).then(function(t){e._DEBUG&&console.log(t),n.data.push({key:"Applicants",values:t.data})},function(t){e._DEBUG&&console.log(t)}),t.job(e.apiRoot,e.user.user_id,e.company.id).then(function(t){e._DEBUG&&console.log(t),n.data.push({key:"Jobs",values:t.data})},function(t){e._DEBUG&&console.log(t)})}])}(window);